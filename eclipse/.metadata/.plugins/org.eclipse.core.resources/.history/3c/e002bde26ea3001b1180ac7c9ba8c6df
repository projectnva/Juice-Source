package clientname.basicgui.comp;

import java.util.ArrayList;

import clientname.basicgui.HUDElement;
import clientname.basicgui.HUDElementCategory;
import clientname.basicgui.utils.Colors;
import clientname.basicgui.utils.RenderUtils;
import com.google.common.collect.Lists;

import net.minecraft.client.gui.FontRenderer;

public class CategoryDisplay {

	public int x, y;
	public HUDElementCategory category;
	
	public ArrayList<ElementButton> buttons = Lists.newArrayList();
	
	public CategoryDisplay(int x, int y, HUDElementCategory category) {
		this.x = x;
		this.y = y;
		this.category = category;
		
		int x2 = x + 105, y2 = 44;
		for(HUDElement element : RenderUtils.getElementsInCategory(category)) {
			buttons.add(new ElementButton(x2, y2, element));
			x2 += RenderUtils.getFontRenderer().getStringWidth(element.name) + 4;
			if(x2 >= (RenderUtils.getScaledResolution().getScaledWidth() - 40) - RenderUtils.getFontRenderer().getStringWidth(element.name) + 12) {
				x2 = 66;
				y2 += 20;
			}
		}
	}
	
	public void draw(int mouseX, int mouseY) {
		FontRenderer fr = RenderUtils.getFontRenderer();
		fr.drawString(RenderUtils.formatCategoryName(category), x, y, Colors.getTextColor());
		
		if(Main.main.basicGui.renderedCategory == category) {
			for(ElementButton button : buttons) {
				button.draw(mouseX, mouseY);
			}
		}
	}
	
	public void mouseClicked(int mouseX, int mouseY, int button) {
		if(isHovered(mouseX, mouseY)) {
			
			if(button == 0) {
				Main.main.basicGui.renderedCategory = category;
			}
		}
		if(Main.main.basicGui.renderedCategory == category) {
			for(ElementButton button2 : buttons) {
				button2.mouseClicked(mouseX, mouseY, button);
			}
		}
	}
	
	public void mouseRelease(int state) {
		if(Main.main.basicGui.renderedCategory == category) {
			for(ElementButton button : buttons) {
				button.mouseRelease(state);
			}
		}
	}
	
	public boolean isHovered(int mouseX, int mouseY) {
		if(mouseX >= x && mouseX <= x + RenderUtils.getFontRenderer().getStringWidth(RenderUtils.formatCategoryName(category)) + 2) {
			if(mouseY >= y && mouseY <= y + 11) {
				return true;
			}
		}
		return false;
	}
}
