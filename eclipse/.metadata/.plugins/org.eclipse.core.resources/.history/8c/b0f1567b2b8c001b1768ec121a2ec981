package com.github.lunatrius.core.client.gui.config;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import net.minecraft.client.gui.GuiScreen;
import net.minecraftforge.common.config.ConfigCategory;
import net.minecraftforge.common.config.ConfigElement;
import net.minecraftforge.common.config.Configuration;
import net.minecraftforge.fml.client.config.GuiConfig;

public abstract class GuiConfigComplex extends GuiConfig {

    public GuiConfigComplex(GuiScreen parent, String modID, Configuration configuration, String langPrefix) {
        super(parent, getConfigElements(configuration, langPrefix), modID, false, false, GuiConfig.getAbridgedConfigPath(configuration.toString()));
    }

    private static List getConfigElements(Configuration configuration, String langPrefix) {
        ArrayList elements = new ArrayList();
        Iterator iterator = configuration.getCategoryNames().iterator();

        while (iterator.hasNext()) {
            String name = (String) iterator.next();
            ConfigCategory category = configuration.getCategory(name).setLanguageKey(langPrefix + ".category." + name);

            if (category.parent == null) {
                elements.add(new ConfigElement(category));
            }
        }

        return elements;
    }
}
